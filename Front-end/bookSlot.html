<!DOCTYPE html>
<html>
<head>
<meta name="viewport" content="width=device-width, initial-scale=1">
<link rel="stylesheet" href="css/bookslot_style.css">
</head>
<body>

<form id="form" action="#" method="post">
  <div class="container">
    <h1>Book your slot</h1>
    <p>Please fill in this form to book your slot.</p>
    <hr>

    <label for="name"><b>Name</b></label>
    <input type="text" placeholder="Enter Name" name="name" id="name" required>
    
    <label for="email"><b>Email</b></label>
    <input type="text" placeholder="Enter Email" name="email" id="email" required>

    <label for="phone"><b>Phone Number</b></label>
    <input type="tel" pattern="[0-9]{10}" placeholder="Enter Phone Number" name="phone" id="phone" required>
    
    <label for="plan"><b>Choose a Plan</b></label>
    <select name="plan" id="plan">
    <option value="Silver">Silver</option>
    <option value="Gold">Gold</option>
    <option value="Platinum">Platinum</option>
    </select>
    
    <label for="appointment"><b>Appointment Slot</b></label>
    <input type="datetime-local" id="appointment" name="appointment">
    
    <hr>
    <button type="submit" class="registerbtn">Book</button>
  </div>

</form>


<script>

  var form = document.getElementById('form');

  form.addEventListener('submit',async function(e){
     e.preventDefault();

     var name = document.getElementById('name').value;
     var email = document.getElementById('email').value;
     var phone = document.getElementById('phone').value;
     var plan = document.getElementById('plan').value;
     var appointment = document.getElementById('appointment').value;


     console.log(plan)


     await fetch("http://localhost:8080/api/form_submit",{
      method:'POST',
      body:JSON.stringify({
         name:name,
         email:email,
         mobile:phone,
         plan:plan,
         appointment_date:appointment
      }),
      headers: {
                    "Content-Type": "application/json",
                },
      }).then(function(data){
        form.reset();
        window.alert('Form added successfully');
      }).catch((e)=>{
      })   
  })

</script>
</body>
</html>